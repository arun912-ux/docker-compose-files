<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>


# drop fluentd logs
<match fluent.**>
  @type null
</match>


# docker metadata
<filter docker.*>
  @type docker_metadata
  tag_prefix "docker.metadata"
  container_id_key "container_id"   # Extract Docker container metadata
  container_name_key "container_name"   # Add container name
</filter>



# Match everything and send to OpenSearch
<match **>
  @type opensearch
  host opensearch
  port 9200
  scheme http
  logstash_format true
  logstash_prefix fluentd
  logstash_dateformat %Y.%m.%d
  include_tag_key true
  reconnect_on_error true
  reload_on_failure true
  request_timeout 30s
</match>

